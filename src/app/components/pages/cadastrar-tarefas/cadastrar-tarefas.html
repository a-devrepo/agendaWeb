<app-navbar />

<div class="vh-100 d-flex justify-content-center align-items-start"
    style="background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%); padding-top: 2rem;">

    <div class="w-100" style="max-width: 900px; padding: 2rem; border-radius: 0.5rem; 
    background-color: #2c2c2c; color: #ffffff; box-shadow: 0 0.25rem 0.5rem rgba(0,0,0,0.3);">

        <h4 class="mb-3 text-center">Formulário de cadastro de tarefas</h4>
        <p class="mb-4 text-center">Preencha os campos e inclua uma tarefa em sua agenda</p>
        <hr class="border-secondary">

        <div *ngIf="mensagemSucesso()" class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>{{ mensagemSucesso() }}</strong>
            <button type="button" class="btn-close" aria-label="Fechar" (click)="mensagemSucesso.set('')"></button>
        </div>

        <div *ngIf="mensagemErro()" class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>{{ mensagemErro() }}</strong>
            <button type="button" class="btn-close" aria-label="Fechar" (click)="mensagemErro.set('')"></button>
        </div>

        <form [formGroup]="formCadastro" (ngSubmit)="cadastrarTarefa()">

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Nome da tarefa:</label>
                    <input type="text" class="form-control bg-secondary text-white border-secondary"
                        formControlName="nome" />
                    <div class="text-danger mt-1"
                        *ngIf="formCadastro.get('nome')?.touched && formCadastro.get('nome')?.invalid">
                        O nome da tarefa é obrigatório e deve ter no mínimo 8 caracteres
                    </div>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label">Data da tarefa:</label>
                    <input type="date" class="form-control bg-secondary text-white border-secondary"
                        formControlName="data" />
                    <div class="text-danger mt-1"
                        *ngIf="formCadastro.get('data')?.touched && formCadastro.get('data')?.invalid">
                        A data da tarefa é obrigatória
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Prioridade da tarefa:</label>
                    <select class="form-select bg-secondary text-white border-secondary" formControlName="prioridade">
                        <option value="">Escolha uma opção</option>
                        <option value="BAIXA">Baixa prioridade</option>
                        <option value="MEDIA">Média prioridade</option>
                        <option value="ALTA">Alta prioridade</option>
                    </select>
                    <div class="text-danger mt-1"
                        *ngIf="formCadastro.get('prioridade')?.touched && formCadastro.get('prioridade')?.invalid">
                        A prioridade da tarefa é obrigatória
                    </div>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label">Categoria da tarefa:</label>
                    <select class="form-select bg-secondary text-white border-secondary" formControlName="categoriaId">
                        <option value="">Escolha uma opção</option>
                        <option *ngFor="let categoria of categorias()" [value]="categoria.id">
                            {{categoria.nome}}
                        </option>
                    </select>
                    <div class="text-danger mt-1"
                        *ngIf="formCadastro.get('categoriaId')?.touched && formCadastro.get('categoriaId')?.invalid">
                        A categoria da tarefa é obrigatória
                    </div>
                </div>
            </div>

            <div class="d-grid mt-3">
                <input type="submit" class="btn btn-success" value="Cadastrar tarefa"
                    [disabled]="formCadastro.invalid" />
            </div>

        </form>
    </div>
</div>