<h4>Consulta de tarefas</h4>
<p>Selecione o período de datas desejado para consultar as tarefas da agenda.</p>
<hr />

<form [formGroup]="formConsulta" (ngSubmit)="consultarTarefas()">
    <div class="row">
        <div class="col">
            <input type="date" class="form-control" formControlName="dataMin"/>
            <div class="text-danger" *ngIf="formConsulta.get('dataMin')?.touched && formConsulta.get('dataMin')?.invalid">
                Por favor, informe a data de início.
            </div>
        </div>
        <div class="col">
            <input type="date" class="form-control" formControlName="dataMax"/>
            <div class="text-danger" *ngIf="formConsulta.get('dataMax')?.touched && formConsulta.get('dataMax')?.invalid">
                Por favor, informe a data de fim.
            </div>
        </div>
        <div class="col">
            <input type="submit" class="btn btn-success" value="Pesquisar tarefas"
                [ngClass]="{'btn-success': formConsulta.valid, 'btn-secondary': formConsulta.invalid}" 
                [disabled]="formConsulta.invalid"/>
        </div>
    </div>
</form>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Nome da tarefa</th>
            <th>Data</th>
            <th>Prioridade</th>
            <th>Categoria</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let tarefa of tarefas()">
            <td>{{tarefa.nome}}</td>
            <td>{{tarefa.data | date: 'dd/MM/yyyy'}}</td>
            <td>{{tarefa.prioridade}}</td>
            <td>{{tarefa.categoria.nome}}</td>
            <td>
                <button class="btn btn-outline-primary btn-sm me-1">
                    Editar
                </button>
                <button class="btn btn-outline-danger btn-sm me-1"
                (click)="excluirTarefa(tarefa.id)">
                    Excluir
                </button>
            </td>
        </tr>
    </tbody>
</table>